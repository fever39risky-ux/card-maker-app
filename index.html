<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ã‚µãƒãƒ¼ãƒˆã‚«ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼ (å…¥åŠ›)</title>
    <style>
        /* ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€è¨­å®š (å¤‰æ›´ãªã—) */
        @font-face {
            font-family: 'Mplus1-Bold';
            src: url('fonts/Mplus1-Bold.otf') format('opentype');
            font-weight: bold;
            font-style: normal;
        }

        /* ã‚¹ã‚¿ã‚¤ãƒ«ã¯ç°¡ç•¥åŒ–ã—ã¦ã„ã¾ã™ */
        body { font-family: sans-serif; text-align: center; margin-top: 50px; background-color: #f0f2f5; }
        .container { max-width: 600px; margin: 0 auto; padding: 30px; background-color: white; border-radius: 10px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); }
        input[type="file"], button, input[type="text"] { padding: 10px 15px; margin: 5px 0; border-radius: 5px; border: 1px solid #ccc; font-size: 16px; }
        button { background-color: #d83d3d; color: white; cursor: pointer; border: none; transition: background-color 0.3s ease; }
        button:hover { background-color: #b33232; }
        .input-group { margin-bottom: 15px; text-align: left; padding: 0 20px; }
        .input-group label { display: block; font-weight: bold; margin-bottom: 5px; }
    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸƒ ã‚µãƒãƒ¼ãƒˆã‚«ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼ ğŸƒ</h1>
        <p class="info-text">ç”»åƒã¨ã‚«ãƒ¼ãƒ‰åã‚’å…¥åŠ›ã—ã€çµæœç”»é¢ã¸é·ç§»ã—ã¾ã™ã€‚</p>

        <div class="input-group">
            <label for="profileImageInput">1. ã‚ãªãŸã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„:</label>
            <input type="file" id="profileImageInput" accept="image/*" style="width: 100%;">
        </div>

        <p>2. ã‚«ãƒ¼ãƒ‰ã®æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:</p>
        <div class="input-group">
            <label for="cardNameInput">ã‚«ãƒ¼ãƒ‰å:</label>
            <input type="text" id="cardNameInput" value="" placeholder="Xã‚¢ã‚«ã‚¦ãƒ³ãƒˆåã‚’å…¥åŠ›" style="width: 90%;">
        </div>
        
        <button onclick="createCard()">çµæœç”»é¢ã¸ç§»å‹•ï¼</button>
    </div>

    <script>
        const profileImageInput = document.getElementById('profileImageInput');
        const cardNameInput = document.getElementById('cardNameInput');

        function createCard() {
            const cardName = cardNameInput.value.trim();
            const profileFile = profileImageInput.files[0];

            // 1. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯
            if (!profileFile) {
                alert("ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚");
                return;
            }

            if (cardName === "") {
                alert("ï¼ˆXã‚¢ã‚«ã‚¦ãƒ³ãƒˆåï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
                return;
            }

            // 2. ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’Data URLã¨ã—ã¦èª­ã¿è¾¼ã‚€
            const reader = new FileReader();
            reader.onload = (e) => {
                const imageDataURL = e.target.result;

                // 3. ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¸€æ™‚ä¿å­˜
                sessionStorage.setItem('cardName', cardName);
                sessionStorage.setItem('imageDataURL', imageDataURL);
                
                // 4. çµæœç”»é¢ã¸é·ç§»
                window.location.href = 'result.html';
            };
            
            // ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿é–‹å§‹
            reader.readAsDataURL(profileFile);
        }
    </script>

</body>
</html>
